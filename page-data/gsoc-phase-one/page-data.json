{"componentChunkName":"component---src-templates-blog-post-js","path":"/gsoc-phase-one/","webpackCompilationHash":"2a48f186cbc5420ef7e3","result":{"data":{"site":{"siteMetadata":{"title":"Mohamed Shadab","author":"Mohamed Shadab"}},"markdownRemark":{"id":"1cec96df-72b7-536e-9f43-59c4901c4054","excerpt":"Project Info Project: Web Pipeline For Kinetic (ODE-Based) Models Description: Ordinary differential equations are widely used for modelling biological networks‚Ä¶","html":"<h3><a href=\"https://summerofcode.withgoogle.com/projects/#6481219057876992\">Project Info</a></h3>\n<p><strong>Project:</strong> Web Pipeline For Kinetic (ODE-Based) Models</p>\n<p><strong>Description:</strong> Ordinary differential equations are widely used for modelling biological networks and processes of kinetics. The idea of the project is to create a web application that allows a user to submit an SBML model and select methods of analysis and receive results. The different kind of analysis methods that will be available for use are Steady State Analysis, Parameter Fitting, Simulation.</p>\n<p><strong>Organization:</strong> Computational Biology @ University of Nebraska-Lincoln</p>\n<p><strong>Mentors:</strong> Achilles Rasquinha, Robert Moore</p>\n<p>The objectives for my phase one were:</p>\n<ul>\n<li>Create a project boilerplate</li>\n<li>Setup SBML parser API (SBML abbr. for Systems Biology Markup Language)</li>\n<li>Create Canvas and Render Model using ccNetViz</li>\n<li>Decrease memory footprint of Docker Images</li>\n<li>Create a simulation tab with appropriate panels</li>\n</ul>\n<h3><a href=\"https://github.com/HelikarLab/ode-app/issues/1\">Create a project boilerplate</a></h3>\n<p>Tools/Technologies used: <a href=\"https://facebook.github.io/create-react-app/\">Create React App</a>, <a href=\"https://reactjs.org/\">ReactJS</a>, <a href=\"https://nodejs.org/en/\">NodeJS</a>, <a href=\"https://expressjs.com/\">ExpressJS</a></p>\n<p>The project was to be developed with ReactJS for the frontend and NodeJS for the backend. My mentor had suggested some boilerplates to begin with but honestly, I am not a fan of boilerplate and love to go vanilla and then build upon that. So what did I do, well what anybody would do - used create react app for the React part and copied the code of some other Node (express) project I had done before. And there you go, easy right, well not really, things got complex over time as we needed to integrate python and docker into the project.</p>\n<p>The current project structure is:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"> |- client              -&gt; Contains the code of the react client\n    |- src              -&gt; Source files of the react client\n        |- components   -&gt; React components\n        |- store        -&gt; Redux store\n |- server              -&gt; Contains the code of the node server\n    |- routes           -&gt; API routes\n    |- controllers      -&gt; API controllers\n    |- models           -&gt; Sequelize(SQL) models\n    |- config           -&gt; Configuration files for the database\n    |- sbmlParser.py    -&gt; Python script to parse a SBML file into a JSON object using libsbml\n |- docker-compose.yml  -&gt; Docker Compose files that runs the application using docker\n |- package.json        -&gt; The main package.json governing the yarn workspaces\n |- README.md           -&gt; The main documentation file. Also this file :)</code></pre></div>\n<p>It uses yarn workspaces and docker. üòç</p>\n<h3><a href=\"https://github.com/HelikarLab/ode-app/issues/2\">Setup a SBML parser API</a></h3>\n<p>Tools/Technologies used: <a href=\"https://www.python.org/\">Python</a>, <a href=\"https://github.com/sbmlteam/python-libsbml\">Python API for libsbml</a>, <a href=\"https://github.com/extrabacon/python-shell\">python-shell</a>, <a href=\"https://github.com/utatti/express-formidable\">express-formidable</a></p>\n<p>For this task, the idea was that the user would upload a SBML file and the application would return all the information present in the SBML file. For this, we had to research the different SBML parser libraries available and in which language was their API. We finally decided to have to go with the python-libsbml as it was developed by the team which create SBML itself and was actively maintained, had a comprehensive API along with good docs.</p>\n<p>Using the python parser entailed a python integration with NodeJS (as the parsing would happen in the backend) and I initially thought this would be troublesome but it turned out to be as easy as importing an npm package and calling its API, namely python-shell.</p>\n<p>The code for the above:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">PythonShell<span class=\"token punctuation\">.</span><span class=\"token function\">run</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"sbmlParser.py\"</span><span class=\"token punctuation\">,</span> options<span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">err<span class=\"token punctuation\">,</span> data</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span>err<span class=\"token punctuation\">)</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">500</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Something went wrong.\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    fs<span class=\"token punctuation\">.</span><span class=\"token function\">unlinkSync</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"./uploads/\"</span> <span class=\"token operator\">+</span> file<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>\n    res<span class=\"token punctuation\">.</span><span class=\"token function\">status</span><span class=\"token punctuation\">(</span><span class=\"token number\">200</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">send</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Well, the final topic of concern in this task was to learn how to handle file uploads in NodeJS and well this wasn‚Äôt as easy as it sounds. There a lot of libraries available out there with unintuitive API and bad docs. With that said I settled for express-formidable (formidable for express).</p>\n<h3><a href=\"https://github.com/HelikarLab/ode-app/issues/3\">Create Canvas and Render Model using ccNetViz</a></h3>\n<p>Tools/Technologies used: <a href=\"https://github.com/HelikarLab/ccNetViz\">ccNetViz</a>, <a href=\"https://reactstrap.github.io/\">reactstrap</a></p>\n<p>The objective of this task was to create an acceptable visualisation of the SBML model that was parsed by the backend so that the user can understand the model better. Now to understand how the model would be visualised we need to understand what constitutes a model. Each model has multiple reactions. Each reaction is reversible or irreversible and has products and reactants. Each product/reactant is a metabolite. All of this information needed to be adequately represented by a graph. It took some time but the Mentors figured out a way and well only the implementation was remaining.</p>\n<p>The toughest part of this task was to get ccNetViz work with React. Once I figured that (it was trial and error üò™), figuring out the logic of how to create the nodes and edges for the graph was also kind of a challenge, mostly because ccNetViz has an API caveat, i.e. you need to give references of the nodes when you are defining edges.</p>\n<p>As for other details, I developed a bare minimum interface (with reactstrap) for the app which displayed information of each reaction, metabolite and the model info.</p>\n<h3><a href=\"https://github.com/HelikarLab/ode-app/issues/5\">Decrease memory footprint of Docker Images</a></h3>\n<p><strong>Proceed only if you know what docker is and how it works</strong></p>\n<p>Tools/Technologies used: <a href=\"https://www.docker.com/\">Docker</a>, <a href=\"https://hub.docker.com/r/statebait/python-libsbml\">Docker Python libSBML</a>, <a href=\"https://hub.docker.com/_/alpine\">Docker Official Alpine Image</a></p>\n<p>All the docker images we used were around 1gb each and having a 3 container system that is a lot of memory and therefore the need to reduce the memory footprint of the Docker Images came up.</p>\n<p>Now, if you have the question that, how does one do that? Yeah, my mind raced through the same question. Mentor, to the rescue; ‚ÄúUse an alpine image‚Äù. üôå</p>\n<p>‚ÄúA minimal Docker image based on Alpine Linux with a complete package index and only 5 MB in size!‚Äù</p>\n<p>Alpine images are great. If you aren‚Äôt using them you should. Learn‚Äôt a lot, made my <a href=\"https://github.com/shadxx7/docker-python-libsbml\">own base image</a> for python-libsbml and got the memory footprint down a lot.</p>\n<h3><a href=\"https://github.com/HelikarLab/ode-app/issues/6\">Create a simulation tab with appropriate panels</a></h3>\n<p>Tools/Technologies used: <a href=\"http://recharts.org/en-US/\">Recharts</a>, <a href=\"https://github.com/STRML/react-grid-layout\">React-Grid-Layout</a></p>\n<p>For this task, I was to create 4 different panels which contain configuration required for the simulation. The difficult part of this task was actually figuring out a sustainable/scalable state and manipulating it as each panel intercommunicated with each other in the effort to create a viable configuration. To use easy-peasy for global state management was a great choice and helped a lot in this task but more on that in <a href=\"#Extras\">‚ÄòExtras‚Äô</a>.</p>\n<p>As for the panels, used react-grid-layout which makes it super easy to create draggable and resizeable layouts.</p>\n<h3>Extras</h3>\n<h4>Docker</h4>\n<p>To achieve consistent behaviour across different Operating Systems and to simplify the deployment process, docker was integrated into the project. 3 different containers were used - Server, Client and the database. All of them are launched together using docker-compose.</p>\n<h4>Database</h4>\n<p>The database used was <a href=\"https://www.postgresql.org/\">PostgreSQL</a> and the ORM in NodeJS was <a href=\"http://docs.sequelizejs.com/\">Sequelize</a>. The App contains 3 models - Model, Reactions and Metabolites. Honestly, I changed the models a bunch of times until I was satisfied with the structure and with that said I am sure they ought to change a few times as the application grows. Other than that currently 2 API‚Äôs integrate the Database with the application; ‚Äòsave model‚Äô and ‚Äòload model‚Äô API.</p>\n<h4>easy-peasy</h4>\n<p>Initially, I used <a href=\"https://redux.js.org/\">Redux</a> for the state management of the react app. If you are accustomed to Redux then you would know the boilerplate it entails which started becoming an issue. Just then I came across this new library <a href=\"https://easy-peasy.now.sh/\">easy-peasy</a>. A state management library built on top of Redux which takes away all the boilerplate of Redux and makes state management extremely easy(as the name suggests üòÅ). It features a hook based API which gave me the incentive to migrate the entire react app to use react hooks(and now all the code looks really clean).</p>\n<h3>Final thoughts</h3>\n<p>Learn‚Äôt a ton of things in the first phase and can‚Äôt wait to learn a ton more in the upcoming tasks!</p>\n<p>With that said I also started contributing to the ccNetViz library (with 5 PRs merged!) and I must say the entire HelikarLab team is amazing, super supportive, helpful and resourceful.</p>\n<p>Finally, I would like to thank my mentors greatly for all their support and if one of you is reading, you must know all of this wouldn‚Äôt be possible without you ü§©.</p>","frontmatter":{"title":"GSoC 2019 Phase One","date":"June 26, 2019","description":"A little about the phase one of my Google Summer of Code 2019. What I did, where I struggled and how I tackled it."}}},"pageContext":{"isCreatedByStatefulCreatePages":false,"slug":"/gsoc-phase-one/","previous":{"fields":{"slug":"/web-development-on-windows/"},"frontmatter":{"title":"Web Development on Windows"}},"next":null}}}